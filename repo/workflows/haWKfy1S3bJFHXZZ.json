{
  "createdAt": "2025-08-22T13:03:02.402Z",
  "updatedAt": "2025-09-10T07:00:27.253Z",
  "id": "haWKfy1S3bJFHXZZ",
  "name": "News fetching",
  "active": false,
  "isArchived": false,
  "nodes": [
    {
      "parameters": {
        "jsCode": "// Get all items coming from the previous node.\nconst incomingItems = $input.all();\n\n// Use .map() to transform each incoming item into the format\n// required by the 'startUrls' field.\nconst formattedUrls = incomingItems.map(item => {\n  return {\n    url: item.json.link, // Get the URL from the 'link' property of the input\n    method: 'GET'      // Add the required 'GET' method\n  };\n});\n\n// Return a single new item for the next node to process.\n// This item's JSON will contain a property 'startUrls'\n// which holds our newly created array.\nreturn {\n  json: {\n    startUrls: formattedUrls\n  }\n};"
      },
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [
        -848,
        448
      ],
      "id": "7a2c25b5-9eea-4780-a8b6-e2bd86a1079a",
      "name": "Code"
    },
    {
      "parameters": {},
      "type": "n8n-nodes-base.manualTrigger",
      "typeVersion": 1,
      "position": [
        -1984,
        448
      ],
      "id": "3f7d135e-67df-4d19-8e11-092c82993da5",
      "name": "When clicking ‘Execute workflow’"
    },
    {
      "parameters": {
        "url": "=https://rss.app/feeds/_SlM0n4mpYfCrd4YA.xml",
        "options": {}
      },
      "type": "n8n-nodes-base.rssFeedRead",
      "typeVersion": 1.1,
      "position": [
        -1792,
        448
      ],
      "id": "06382f0f-5cff-44f0-9590-1c68567b08bd",
      "name": "RSS Read1"
    },
    {
      "parameters": {
        "url": "https://api.apify.com/v2/acts/apify~website-content-crawler/run-sync-get-dataset-items?token=apify_api_DWU0MgxnK05aow6duJwlWtgmeLcRQf3iJlrs",
        "sendBody": true,
        "specifyBody": "json",
        "jsonBody": "={\n  \"aggressivePrune\": false,\n  \"blockMedia\": true,\n  \"clickElementsCssSelector\": \"[aria-expanded=\\\"false\\\"]\",\n  \"clientSideMinChangePercentage\": 15,\n  \"crawlerType\": \"playwright:adaptive\",\n  \"debugLog\": false,\n  \"debugMode\": false,\n  \"expandIframes\": true,\n  \"ignoreCanonicalUrl\": false,\n  \"ignoreHttpsErrors\": false,\n  \"keepUrlFragments\": false,\n  \"proxyConfiguration\": {\n    \"useApifyProxy\": true\n  },\n  \"readableTextCharThreshold\": 100,\n  \"removeCookieWarnings\": true,\n  \"removeElementsCssSelector\": \"nav, footer, script, style, noscript, svg, img[src^='data:'],\\n[role=\\\"alert\\\"],\\n[role=\\\"banner\\\"],\\n[role=\\\"dialog\\\"],\\n[role=\\\"alertdialog\\\"],\\n[role=\\\"region\\\"][aria-label*=\\\"skip\\\" i],\\n[aria-modal=\\\"true\\\"]\",\n  \"renderingTypeDetectionPercentage\": 10,\n  \"respectRobotsTxtFile\": true,\n  \"saveFiles\": false,\n  \"saveHtml\": false,\n  \"saveHtmlAsFile\": false,\n  \"saveMarkdown\": true,\n  \"saveScreenshots\": false,\n  \"startUrls\":{{ JSON.stringify($json.startUrls) }},\n  \"useSitemaps\": false,\n  \"includeUrlGlobs\": [],\n  \"excludeUrlGlobs\": [],\n  \"maxCrawlDepth\": 20,\n  \"maxCrawlPages\": 9999999,\n  \"initialConcurrency\": 0,\n  \"maxConcurrency\": 200,\n  \"initialCookies\": [],\n  \"maxSessionRotations\": 10,\n  \"maxRequestRetries\": 3,\n  \"requestTimeoutSecs\": 60,\n  \"minFileDownloadSpeedKBps\": 128,\n  \"dynamicContentWaitSecs\": 10,\n  \"waitForSelector\": \"\",\n  \"softWaitForSelector\": \"\",\n  \"maxScrollHeightPixels\": 5000,\n  \"keepElementsCssSelector\": \"\",\n  \"htmlTransformer\": \"readableText\",\n  \"maxResults\": 9999999\n}",
        "options": {}
      },
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 4.2,
      "position": [
        -640,
        448
      ],
      "id": "7175a3ea-435c-4175-b118-8c1942fca969",
      "name": "HTTP Request1"
    },
    {
      "parameters": {
        "modelId": {
          "__rl": true,
          "value": "gpt-4o-mini",
          "mode": "list",
          "cachedResultName": "GPT-4O-MINI"
        },
        "messages": {
          "values": [
            {
              "content": "=You will receive multiple pieces of content with fields such as creator, title, link, content, contentSnippet, guid, isoDate, etc.\nmake sure the news are published withn the past 24 hours\nYour task:\n\nFilter out items that are not real news articles (e.g., marketing announcements, advertisements, event invites).\n\nFrom the remaining items, select the 10 most relevant. Prioritize items that mention AI automation, AI adoption in business, or major AI developments.\n\nReturn the results as a clean JSON array, with each object containing:\nrelevant news {\ntitle\n\nlink\n\ndate (from isoDate or pubDate)\n\nsnippet (short summary from contentSnippet or a concise rewrite from content)\n\ncreator\n}\nOutput only valid JSON, no extra text, explanations, or markdown code fences.\n\nIf fewer or more than 10 valid news articles exist, return all that qualify, max is 15.\nhere is the input: {{ JSON.stringify($input.all()) }}\n"
            }
          ]
        },
        "jsonOutput": true,
        "options": {}
      },
      "type": "@n8n/n8n-nodes-langchain.openAi",
      "typeVersion": 1.8,
      "position": [
        -1392,
        448
      ],
      "id": "7c4ea86e-0a7b-4105-ad00-0b52998b7f7b",
      "name": "Message a model",
      "credentials": {
        "openAiApi": {
          "id": "P97bW4SECej7SdA6",
          "name": "don't use this eric"
        }
      }
    },
    {
      "parameters": {
        "jsCode": "// Get all incoming items passed to the node.\nconst items = $input.all();\n\n// Extract the 'json' data from each item to create a new array.\nconst combinedArray = items.map(item => item.json);\n\n// Return a single item.\n// The array is now wrapped in an object with a key, e.g., \"data\".\nreturn [{\n  json: {\n    data: combinedArray\n  }\n}];"
      },
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [
        -1584,
        448
      ],
      "id": "e9629565-686d-439e-9c08-fe8a17fe0f1c",
      "name": "Code2"
    },
    {
      "parameters": {
        "fieldToSplitOut": "message.content.relevant_news",
        "options": {}
      },
      "type": "n8n-nodes-base.splitOut",
      "typeVersion": 1,
      "position": [
        -1056,
        448
      ],
      "id": "31a80d92-fda5-4ec8-ba31-b1c23a7a0cdc",
      "name": "Split Out"
    },
    {
      "parameters": {
        "options": {}
      },
      "type": "n8n-nodes-base.dateTimeTool",
      "typeVersion": 2,
      "position": [
        -1312,
        656
      ],
      "id": "ceff68e3-63d7-476e-a879-2fd01b44b76c",
      "name": "Date & Time"
    },
    {
      "parameters": {
        "jsCode": "\nreturn $input.all();"
      },
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [
        -672,
        768
      ],
      "id": "b6843515-7418-455c-8860-4956362e61e5",
      "name": "Code3"
    },
    {
      "parameters": {
        "mode": "combine",
        "advanced": true,
        "mergeByFields": {
          "values": [
            {
              "field1": "url",
              "field2": "link"
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.merge",
      "typeVersion": 3.2,
      "position": [
        -384,
        464
      ],
      "id": "3b92f842-93fd-4f99-805c-fe3f91b607e2",
      "name": "Merge"
    },
    {
      "parameters": {
        "model": {
          "__rl": true,
          "value": "gpt-4o-mini",
          "mode": "list",
          "cachedResultName": "gpt-4o-mini"
        },
        "options": {}
      },
      "type": "@n8n/n8n-nodes-langchain.lmChatOpenAi",
      "typeVersion": 1.2,
      "position": [
        -320,
        672
      ],
      "id": "309e7d32-c4e0-4c02-bccc-91b056a313f0",
      "name": "OpenAI Chat Model",
      "credentials": {
        "openAiApi": {
          "id": "P97bW4SECej7SdA6",
          "name": "don't use this eric"
        }
      }
    },
    {
      "parameters": {
        "jsCode": "// Get all incoming items passed to the node.\nconst items = $input.all();\n\n// Extract the 'json' data from each item to create a new array.\nconst combinedArray = items.map(item => item.json);\n\n// Return a single item.\n// The array is now wrapped in an object with a key, e.g., \"data\".\nreturn [{\n  json: {\n    data: combinedArray\n  }\n}];"
      },
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [
        160,
        464
      ],
      "id": "721346ff-d9cd-40ba-8941-7351e22c58d5",
      "name": "Code4"
    },
    {
      "parameters": {
        "model": {
          "__rl": true,
          "value": "gpt-4o-mini",
          "mode": "list",
          "cachedResultName": "gpt-4o-mini"
        },
        "options": {}
      },
      "type": "@n8n/n8n-nodes-langchain.lmChatOpenAi",
      "typeVersion": 1.2,
      "position": [
        368,
        608
      ],
      "id": "eca7f5a0-8d05-4bf6-bb59-0c0979e569ee",
      "name": "OpenAI Chat Model2",
      "credentials": {
        "openAiApi": {
          "id": "P97bW4SECej7SdA6",
          "name": "don't use this eric"
        }
      }
    },
    {
      "parameters": {
        "promptType": "define",
        "text": "=Summarize the given input which is news data and the data inside the url.\nyour job is to summarize the news and output a single json called summarized news that looks something like this: \n\"summarized news\":\"Ai is worth learning by (writer or cretor), june 15, 2025\n\n(summarized news here)\n(news link at the end)\n\"\nwrite only according to the input, don't hallucinate \nhere is the input: {{ JSON.stringify($input.all()) }}",
        "options": {}
      },
      "type": "@n8n/n8n-nodes-langchain.agent",
      "typeVersion": 2.2,
      "position": [
        -176,
        464
      ],
      "id": "4e561916-70aa-463f-a161-3939e142d16d",
      "name": "summarize each news"
    },
    {
      "parameters": {
        "promptType": "define",
        "text": "=Objective: Synthesize and prioritize the provided news summaries based on their relevance to practical AI automation.\n\nInstructions:\n\n    Analyze and Consolidate: Review all the provided summarized news items. Identify the core news stories that are repeated across the different summaries (e.g., YCharts award, OpenAI/Broadcom chip partnership, etc.). For each core story, combine the details from all summaries to create the most complete description.\n\n    Prioritize by Relevance: Organize the consolidated news stories in a numbered list, from most to least relevant to AI automation. Use the following criteria for prioritization:\n\n        Tier 1 (Most Relevant): News about specific AI-powered tools, platforms, or software that directly automate tasks and workflows (e.g., YCharts AI Chat, BluePond.AI CoPilot, UiPath's automation platform).\n\n        Tier 2 (Highly Relevant): News about foundational AI models or technologies that enable on-device or specialized automation (e.g., Google's EmbeddingGemma).\n\n        Tier 3 (Relevant): News concerning the underlying hardware and infrastructure that powers AI automation (e.g., OpenAI and Broadcom's chip development).\n\n        Tier 4 (Contextually Relevant): Broader industry trends, reports, and geopolitical events related to AI (e.g., reports on AI in manufacturing, Anthropic's security measures).\n\n    Synthesize and Format: Combine the prioritized stories into a single, coherent news brief. Use a clear title and provide a concise summary for each news item. Ensure the final output is a single, easy-to-read text.\nhere is the input: {{ JSON.stringify($input.all()) }}",
        "options": {}
      },
      "type": "@n8n/n8n-nodes-langchain.agent",
      "typeVersion": 2.2,
      "position": [
        368,
        464
      ],
      "id": "faa6548b-6b8f-4271-b11f-ad167d75f2c3",
      "name": "summarize the whole news"
    },
    {
      "parameters": {
        "jsCode": "// Get all incoming items from the previous node\nconst items = $input.all();\n\n// Loop through each item to process it individually\nfor (const item of items) {\n  // Get the text from the 'output' field in the item's JSON data\n  let textToClean = item.json.output;\n\n  // Check if the text actually exists to prevent errors\n  if (textToClean && typeof textToClean === 'string') {\n    // Use chained .replace() with regular expressions to remove symbols\n    \n    // 1. Remove ### headers from the beginning of lines\n    // The 'gm' flags ensure it checks all lines globally\n    textToClean = textToClean.replace(/^### /gm, '');\n\n    // 2. Remove double asterisks (**) used for bolding\n    // The '\\' escapes the asterisk, which is a special character in regex\n    textToClean = textToClean.replace(/\\*\\*/g, '');\n    \n    // 3. Remove bullet points ('- ') from the start of lines\n    // This replaces the bullet with three spaces to maintain indentation\n    textToClean = textToClean.replace(/^\\s*-\\s/gm, '   ');\n\n    // Update the item's data with the cleaned text\n    item.json.output = textToClean;\n  }\n}\n\n// Return the modified items to the next node in the workflow\nreturn items;"
      },
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [
        720,
        464
      ],
      "id": "572c6c5a-cb6b-435d-a5ac-ee7a1f95d305",
      "name": "Code5"
    },
    {
      "parameters": {
        "operation": "create",
        "base": {
          "__rl": true,
          "value": "appcyfrUYMKl7NjPw",
          "mode": "list",
          "cachedResultName": "Post Tracker",
          "cachedResultUrl": "https://airtable.com/appcyfrUYMKl7NjPw"
        },
        "table": {
          "__rl": true,
          "value": "tblA62b2MCfyU0BQg",
          "mode": "list",
          "cachedResultName": "Summarized News",
          "cachedResultUrl": "https://airtable.com/appcyfrUYMKl7NjPw/tblA62b2MCfyU0BQg"
        },
        "columns": {
          "mappingMode": "defineBelow",
          "value": {
            "Summarized news": "={{ $json.output }}"
          },
          "matchingColumns": [],
          "schema": [
            {
              "id": "Summarized news",
              "displayName": "Summarized news",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "Created At",
              "displayName": "Created At",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": true,
              "removed": true
            }
          ],
          "attemptToConvertTypes": false,
          "convertFieldsToString": false
        },
        "options": {}
      },
      "type": "n8n-nodes-base.airtable",
      "typeVersion": 2.1,
      "position": [
        912,
        464
      ],
      "id": "44332435-d223-4c7e-9902-2346b0fe7d29",
      "name": "Create a record",
      "credentials": {
        "airtableTokenApi": {
          "id": "HugvDjMnYVe9WgLs",
          "name": "Content-idea"
        }
      }
    }
  ],
  "connections": {
    "Code": {
      "main": [
        [
          {
            "node": "HTTP Request1",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "When clicking ‘Execute workflow’": {
      "main": [
        [
          {
            "node": "RSS Read1",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "RSS Read1": {
      "main": [
        [
          {
            "node": "Code2",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Code2": {
      "main": [
        [
          {
            "node": "Message a model",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Message a model": {
      "main": [
        [
          {
            "node": "Split Out",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Split Out": {
      "main": [
        [
          {
            "node": "Code",
            "type": "main",
            "index": 0
          },
          {
            "node": "Code3",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Date & Time": {
      "ai_tool": [
        [
          {
            "node": "Message a model",
            "type": "ai_tool",
            "index": 0
          }
        ]
      ]
    },
    "HTTP Request1": {
      "main": [
        [
          {
            "node": "Merge",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Code3": {
      "main": [
        [
          {
            "node": "Merge",
            "type": "main",
            "index": 1
          }
        ]
      ]
    },
    "Merge": {
      "main": [
        [
          {
            "node": "summarize each news",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "OpenAI Chat Model": {
      "ai_languageModel": [
        [
          {
            "node": "summarize each news",
            "type": "ai_languageModel",
            "index": 0
          }
        ]
      ]
    },
    "Code4": {
      "main": [
        [
          {
            "node": "summarize the whole news",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "OpenAI Chat Model2": {
      "ai_languageModel": [
        [
          {
            "node": "summarize the whole news",
            "type": "ai_languageModel",
            "index": 0
          }
        ]
      ]
    },
    "summarize each news": {
      "main": [
        [
          {
            "node": "Code4",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "summarize the whole news": {
      "main": [
        [
          {
            "node": "Code5",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Code5": {
      "main": [
        [
          {
            "node": "Create a record",
            "type": "main",
            "index": 0
          }
        ]
      ]
    }
  },
  "settings": {
    "executionOrder": "v1"
  },
  "staticData": null,
  "meta": {
    "templateCredsSetupCompleted": true
  },
  "pinData": {},
  "versionId": "413032ff-7781-4b20-8e61-9a56cc769831",
  "triggerCount": 0,
  "tags": [],
  "shared": [
    {
      "createdAt": "2025-08-22T13:03:02.402Z",
      "updatedAt": "2025-08-22T13:03:02.402Z",
      "role": "workflow:owner",
      "workflowId": "haWKfy1S3bJFHXZZ",
      "projectId": "IQ4w3zW02fJzIdTt",
      "project": {
        "createdAt": "2025-01-25T02:11:56.995Z",
        "updatedAt": "2025-01-25T21:11:21.957Z",
        "id": "IQ4w3zW02fJzIdTt",
        "name": "Yonatan Tesfaye <yonatantesfaye30@gmail.com>",
        "type": "personal",
        "icon": null,
        "description": null
      }
    }
  ]
}