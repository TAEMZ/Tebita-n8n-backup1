{
  "createdAt": "2025-07-11T12:47:17.638Z",
  "updatedAt": "2025-07-11T17:47:52.170Z",
  "id": "A51hnq8ZVGKi9UWI",
  "name": "cover_letter_generator",
  "active": false,
  "isArchived": false,
  "nodes": [
    {
      "parameters": {
        "httpMethod": "POST",
        "path": "generate-cover-letter",
        "responseMode": "responseNode",
        "options": {}
      },
      "type": "n8n-nodes-base.webhook",
      "typeVersion": 2,
      "position": [
        0,
        0
      ],
      "id": "95e6012f-b62c-437b-bdeb-0700e1cd4e2a",
      "name": "Webhook",
      "webhookId": "0b418495-d07a-4ce8-a214-22cfb3fd205d"
    },
    {
      "parameters": {
        "model": {
          "__rl": true,
          "mode": "list",
          "value": "gpt-4o-mini"
        },
        "options": {
          "frequencyPenalty": 0.2,
          "maxTokens": 800,
          "presencePenalty": 0,
          "temperature": 0.7
        }
      },
      "type": "@n8n/n8n-nodes-langchain.lmChatOpenAi",
      "typeVersion": 1.2,
      "position": [
        260,
        220
      ],
      "id": "1d9ad145-fe2e-4ac1-857e-b1eaf5550869",
      "name": "OpenAI Chat Model",
      "credentials": {
        "openAiApi": {
          "id": "NdqrWvU3kkpHiuep",
          "name": "Tebita-openai"
        }
      }
    },
    {
      "parameters": {
        "promptType": "define",
        "text": "=Extract and structure the following data into clean JSON:\n\n---\n\nüü¢ Job HTML (Upwork format):\n{{$json[\"jobDetailsHtml\"]}}\n\nüü¢ Job Metadata:\n- URL: {{$json[\"url\"]}}\n- Timestamp: {{$json[\"timestamp\"]}}\n\n---\n\nüü¶ Candidate Profile Details:\n- Name: {{$json[\"profile\"][\"name\"]}}\n- Role: {{$json[\"profile\"][\"role\"]}}\n- Location: {{$json[\"profile\"][\"location\"]}}\n- Hourly Rate: {{$json[\"profile\"][\"hourly_rate\"]}}\n- About: {{$json[\"profile\"][\"about\"]}}\n- Skills: {{$json[\"skills\"]}}\n- Certifications: {{$json[\"userProfile\"][\"certifications\"]}}\n- Experience: {{$json[\"userProfile\"][\"experience\"]}}\n- Work History: {{$json[\"workHistory\"]}}\n\n---\n\nüßæ Return the structured JSON like this:\n{\n  \"job\": {\n    \"title\": \"\",\n    \"category\": \"\",\n    \"postedDate\": \"\",\n    \"description\": \"\",\n    \"skills\": [],\n    \"experienceLevel\": \"\",\n    \"price\": \"\",\n    \"duration\": \"\",\n    \"sourceUrl\": \"\"\n  },\n  \"profile\": {\n    \"name\": \"\",\n    \"role\": \"\",\n    \"location\": \"\",\n    \"hourlyRate\": \"\",\n    \"about\": \"\",\n    \"skills\": [],\n    \"certifications\": [],\n    \"experience\": [\n      { \"company\": \"\", \"description\": \"\" }\n    ],\n    \"workHistory\": [\n      { \"feedback\": \"\", \"rating\": \"\", \"project_title\": \"\" }\n    ]\n  }\n}\n",
        "hasOutputParser": true,
        "options": {}
      },
      "type": "@n8n/n8n-nodes-langchain.agent",
      "typeVersion": 2,
      "position": [
        220,
        0
      ],
      "id": "fe873e9a-5495-4f81-8fe9-135427073e2c",
      "name": "AI Agent one"
    },
    {
      "parameters": {
        "promptType": "define",
        "text": "=Write a personalized, professional, and enthusiastic Upwork cover letter for the following job using the candidate's profile information.\n\n---\n\nüü¢ Job:\n- Title: {{$json[\"job\"][\"title\"]}}\n- Category: {{$json[\"job\"][\"category\"]}}\n- Posted Date: {{$json[\"job\"][\"postedDate\"]}}\n- Description: {{$json[\"job\"][\"description\"]}}\n- Skills Required: {{$json[\"job\"][\"skills\"].join(\", \")}}\n- Experience Level: {{$json[\"job\"][\"experienceLevel\"]}}\n- Price: {{$json[\"job\"][\"price\"]}}\n- Duration: {{$json[\"job\"][\"duration\"]}}\n- Job Link: {{$json[\"job\"][\"sourceUrl\"]}}\n\n---\n\nüü¶ Candidate Profile:\n- Name: {{$json[\"profile\"][\"name\"]}}\n- Role: {{$json[\"profile\"][\"role\"]}}\n- Location: {{$json[\"profile\"][\"location\"]}}\n- Hourly Rate: ${{$json[\"profile\"][\"hourlyRate\"]}}\n- About: {{$json[\"profile\"][\"about\"]}}\n- Skills: {{$json[\"profile\"][\"skills\"].join(\", \")}}\n- Certifications: {{$json[\"profile\"][\"certifications\"].join(\", \")}}\n- Experience:\n{{ $json[\"profile\"][\"experience\"].map(e => `- ${e.company}: ${e.description}`).join(\"\\n\") }}\n- Past Feedback:\n{{ $json[\"profile\"][\"workHistory\"].map(w => `- ‚≠ê ${w.rating}: ${w.feedback}`).join(\"\\n\") }}\n\n---\n\nüìù Tone: confident, polite, enthusiastic. Mention that the candidate is available to start immediately. Do not include greetings or closings like ‚ÄúDear Sir‚Äù or ‚ÄúThanks‚Äù ‚Äî just the body of the letter.\n",
        "options": {}
      },
      "type": "@n8n/n8n-nodes-langchain.agent",
      "typeVersion": 2,
      "position": [
        580,
        0
      ],
      "id": "1cef09b0-2733-4f66-8a9f-791125a5d1f1",
      "name": "Agent 2 - Generate Cover Letter"
    },
    {
      "parameters": {
        "model": {
          "__rl": true,
          "mode": "list",
          "value": "gpt-4o-mini"
        },
        "options": {}
      },
      "type": "@n8n/n8n-nodes-langchain.lmChatOpenAi",
      "typeVersion": 1.2,
      "position": [
        620,
        220
      ],
      "id": "051574d2-f3ec-480f-a1db-fdfbfb58b52b",
      "name": "OpenAI Chat Model1",
      "credentials": {
        "openAiApi": {
          "id": "NdqrWvU3kkpHiuep",
          "name": "Tebita-openai"
        }
      }
    },
    {
      "parameters": {
        "respondWith": "allIncomingItems",
        "options": {}
      },
      "type": "n8n-nodes-base.respondToWebhook",
      "typeVersion": 1.4,
      "position": [
        940,
        0
      ],
      "id": "b0c92d63-7891-40fe-a1c2-428b4d71b650",
      "name": "Respond to Webhook"
    }
  ],
  "connections": {
    "Webhook": {
      "main": [
        [
          {
            "node": "AI Agent one",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "OpenAI Chat Model": {
      "ai_languageModel": [
        [
          {
            "node": "AI Agent one",
            "type": "ai_languageModel",
            "index": 0
          }
        ]
      ]
    },
    "AI Agent one": {
      "main": [
        [
          {
            "node": "Agent 2 - Generate Cover Letter",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "OpenAI Chat Model1": {
      "ai_languageModel": [
        [
          {
            "node": "Agent 2 - Generate Cover Letter",
            "type": "ai_languageModel",
            "index": 0
          }
        ]
      ]
    },
    "Agent 2 - Generate Cover Letter": {
      "main": [
        [
          {
            "node": "Respond to Webhook",
            "type": "main",
            "index": 0
          }
        ]
      ]
    }
  },
  "settings": {
    "executionOrder": "v1"
  },
  "staticData": null,
  "meta": {
    "templateCredsSetupCompleted": true
  },
  "pinData": {},
  "versionId": "fcffb146-1ec5-40f8-ac46-be34a32282fc",
  "triggerCount": 1,
  "tags": [],
  "shared": [
    {
      "createdAt": "2025-07-11T12:47:17.638Z",
      "updatedAt": "2025-07-11T12:47:17.638Z",
      "role": "workflow:owner",
      "workflowId": "A51hnq8ZVGKi9UWI",
      "projectId": "IQ4w3zW02fJzIdTt",
      "project": {
        "createdAt": "2025-01-25T02:11:56.995Z",
        "updatedAt": "2025-01-25T21:11:21.957Z",
        "id": "IQ4w3zW02fJzIdTt",
        "name": "Yonatan Tesfaye <yonatantesfaye30@gmail.com>",
        "type": "personal",
        "icon": null,
        "description": null
      }
    }
  ]
}